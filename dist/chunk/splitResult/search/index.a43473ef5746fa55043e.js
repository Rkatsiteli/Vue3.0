(window.webpackJsonpso=window.webpackJsonpso||[]).push([[7],{128:function(t,e,a){var n=a(129);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(6).default)("41d65dae",n,!1,{})},129:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,"\n.search {\n  padding: 16px;\n}\n.search .table {\n  margin-top: 16px;\n}\n.search .table table tr,\n.search .table table td,\n.search .table table th {\n  cursor: pointer;\n  font-size: 12px;\n}\n.search .table .selectCheckBoxList {\n  position: absolute;\n  top: 5px;\n}\n.search .table .selectCheckBoxList code {\n  color: red;\n}\n.search .ivu-page .ivu-icon:before,\n.search .ivu-page .ivu-icon:after {\n  position: relative;\n  top: 8px;\n}\n.search .ivu-page .ivu-icon-arrow-down-b:before {\n  top: 0;\n}\n.search .ivu-table-fixed-body {\n  height: 400px !important;\n}\n.search .formItem {\n  max-width: 400px;\n  min-width: 300px;\n  width: 100%;\n}\n.search .ivu-form-item {\n  margin-bottom: 8px;\n}\n.red {\n  color: red;\n}\n",""])},130:function(t,e,a){"use strict";a.r(e);var n=a(69),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a(133),i=a(0),l=!1;var c=function(t){l||a(131)},u=Object(i.a)(o.a,s.a,s.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\splitResult\\search\\single.vue",e.default=u.exports},131:function(t,e,a){var n=a(132);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(6).default)("2eefd110",n,!1,{})},132:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,"\n.singleSplit .ivu-form-item {\n  margin-bottom: 0 !important;\n}\n.singleSplit .itemList {\n  margin-top: 12px;\n}\n.singleSplit .itemList .ivu-row {\n  margin-bottom: 30px;\n}\n.singleSplit .itemList .ivu-input-number {\n  width: 80%;\n}\n.singleSplit .marginLenft {\n  margin-left: 15px;\n  margin-top: 3px;\n}\n",""])},133:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"singleSplit",attrs:{value:t.singleSplit.modal1,closable:!0,"mask-closable":!1,title:"奖金数据：",width:"90%"},on:{"on-cancel":t.onCancel}},[a("Form",{ref:"formValidate",attrs:{model:t.formDynamic,"label-width":90}},[a("Card",[a("Row",[a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"员工："}},[t._v("\n          "+t._s(t.data.emplName)+"("+t._s(t.data.emplId)+")\n        ")])],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"职位："}},[t._v("\n          "+t._s(t.data.jobPost)+"("+t._s(t.data.jobRank)+")\n        ")])],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"奖金名称："}},[t._v("\n          "+t._s(t.data.batchName)+"\n        ")])],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"奖金类型："}},[t._v("\n          "+t._s(t.data.typeName)+"\n        ")])],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"奖金金额："}},[t._v("\n          "+t._s(t.data.bonusValue)+"\n        ")])],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"奖金发放月："}},[t._v("\n          "+t._s(t._f("formatDate")(t.data.grantMonth,"yyyy-MM"))+"\n        ")])],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{attrs:{label:"发放状态："}},[t._v("\n          "+t._s(3==t.data.status?"已发放":"未发放")+"\n        ")])],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"多次发薪："}},[t._v("\n          "+t._s("2"==t.data.multiSalary?"否":"是")+"\n        ")])],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{label:"12月分摊："}},[t._v("\n          "+t._s("2"==t.data.monthShare?"否":"是")+"\n        ")])],1)],1)],1),t._v(" "),1==t.singleSplit.canEdit?a("Card",{staticClass:"itemList"},t._l(t.formDynamic.item,function(e,n){return a("Row",{key:n},[a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{prop:"item."+n+".months",rules:t.formDynamic.ruleValidate.months,label:"月份："}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{editable:!1,type:"month",format:"yyyy-MM",placeholder:"请选择"},model:{value:e.months,callback:function(a){t.$set(e,"months",a)},expression:"v.months"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"5"}},[a("FormItem",{attrs:{prop:"item."+n+".values",rules:t.formDynamic.ruleValidate.values,label:"金额："}},[a("InputNumber",{attrs:{min:0,max:1e16,parser:function(t){return Number(t).toFixed(2)},step:.01,placeholder:"请输入金额"},model:{value:e.values,callback:function(a){t.$set(e,"values",a)},expression:"v.values"}})],1)],1),t._v(" "),a("Col",{staticClass:"marginLenft",attrs:{span:"4"}},[a("Checkbox",{model:{value:e.multiSalarys,callback:function(a){t.$set(e,"multiSalarys",a)},expression:"v.multiSalarys"}},[t._v("多次发薪")]),t._v(" "),a("Checkbox",{model:{value:e.monthShares,callback:function(a){t.$set(e,"monthShares",a)},expression:"v.monthShares"}},[t._v("12月分摊")])],1),t._v(" "),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{prop:"item."+n+".depts",rules:t.formDynamic.ruleValidate.depts,label:"归属部门："}},[a("Select",{attrs:{editable:!1,filterable:""},model:{value:e.depts,callback:function(a){t.$set(e,"depts",a)},expression:"v.depts"}},t._l(t.$store.state.batch.deptList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),a("Col",{staticClass:"marginLenft",attrs:{span:"3"}},[a("Button",{attrs:{type:"dashed",icon:"plus-round"},on:{click:t.handleAdd}}),t._v(" "),a("Button",{attrs:{disabled:t.formDynamic.item.length<=1,type:"dashed",icon:"minus-round"},on:{click:function(e){t.handleDel(n)}}})],1)],1)})):t._e()],1),t._v(" "),1==t.singleSplit.canEdit?a("Button",{attrs:{slot:"footer",type:"primary"},on:{click:t.submitOk},slot:"footer"},[t._v("确认分拆")]):a("Button",{attrs:{slot:"footer",type:"primary"},on:{click:t.onCancel},slot:"footer"},[t._v("关闭")])],1)},o=[];n._withStripped=!0},134:function(t,e,a){"use strict";a.r(e);var n=a(70),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a(141),i=a(0),l=!1;var c=function(t){l||a(135)},u=Object(i.a)(o.a,s.a,s.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\splitResult\\search\\muchPartition.vue",e.default=u.exports},135:function(t,e,a){var n=a(136);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(6).default)("00ced304",n,!1,{})},136:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,"\n.muchPartition .preview header {\n  padding: 12px 0 6px;\n  margin-bottom: 12px;\n  border-bottom: 1px solid #dddddd;\n}\n.muchPartition .preview .partitionOk {\n  margin-top: -50px;\n  margin-bottom: 13px;\n  text-align: right;\n}\n.muchPartition .ivu-table .demo-table-error-row td {\n  background-color: #ff6600;\n  color: #fff;\n}\n.muchPartition .ivu-table .demo-table-info-row td {\n  background-color: #2db7f5;\n  color: #fff;\n}\n.muchPartition .splitDataDown {\n  cursor: pointer;\n  text-decoration: underline;\n}\n.muchPartition .toastDetails {\n  margin-top: 5px;\n  margin-bottom: 7px;\n  font-size: 14px;\n  text-indent: 5px;\n}\n.muchPartition .toastDetails code {\n  color: red;\n  font-size: 15px;\n}\n",""])},137:function(t,e,a){"use strict";a.r(e);var n=a(71),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a(140),i=a(0),l=!1;var c=function(t){l||a(138)},u=Object(i.a)(o.a,s.a,s.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\splitResult\\search\\component\\confirmationSplit.vue",e.default=u.exports},138:function(t,e,a){var n=a(139);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(6).default)("ac2c9002",n,!1,{})},139:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,"\n.confirmationSplit .ivu-modal-mask,\n.confirmationSplit .ivu-modal-wrap {\n  z-index: 1001;\n}\n.confirmationSplit .red {\n  color: red;\n}\n",""])},140:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"confirmationSplit",attrs:{loading:t.loading,"mask-closable":!1,title:"提示信息","on-cancel":"asyncCancel"},on:{"on-ok":t.asyncOK},model:{value:t.modal7,callback:function(e){t.modal7=e},expression:"modal7"}},[a("p",[t._v("奖金总额："),a("code",{staticClass:"red"},[t._v(t._s(t._f("formatMoney")(t.formItem.totalBonus,2)))])]),t._v(" "),a("p",[t._v("分拆总金额："),a("code",{staticClass:"red"},[t._v(t._s(t._f("formatMoney")(t.formItem.uncoveringTotalBonus,2)))])]),t._v(" "),a("p",{staticStyle:{"margin-top":"7px"}},[t._v("共计 "),a("code",{staticClass:"red"},[t._v(t._s(t.tableList.data.length||0))]),t._v(" 条奖金数据，确认分拆吗？")])])},o=[];n._withStripped=!0},141:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"muchPartition",attrs:{"mask-closable":!1,width:"90%",title:"批量分拆","ok-text":"关闭","cancel-text":""},on:{"on-cancel":function(e){t.onCancel(!0)}},model:{value:t.muchPartition.modal1,callback:function(e){t.$set(t.muchPartition,"modal1",e)},expression:"muchPartition.modal1"}},[a("Form",{attrs:{"label-width":80}},[a("Card",[a("Row",[a("Col",{attrs:{span:"4"}},[a("span",{staticClass:"splitDataDown",on:{click:t.splitDataDown}},[t._v("\n          待分拆奖金数据.xlsx")])]),t._v(" "),a("Col",{attrs:{span:"5"}},[t.muchPartition.modal1?a("Upload",{attrs:{"show-upload-list":!1,format:["xls","xlsx"],"on-format-error":t.formatErrorUpload,"on-progress":t.onProgress,"on-success":t.uploadSuccess,"on-error":t.uploadError,action:t.actionUpload}},[a("Button",{attrs:{type:"primary"}},[t._v("导入预览")])],1):t._e()],1)],1),t._v(" "),a("Row",{staticClass:"preview"},[a("Col",[a("header",[t._v("预览")])]),t._v(" "),a("Col",{staticClass:"partitionOk",attrs:{align:"center"}},[a("Button",{attrs:{disabled:t.isShowimport,type:"primary"},on:{click:t.okExportTable}},[t._v("预览分拆结果")]),t._v(" "),a("Button",{attrs:{disabled:t.isShowimport,type:"primary"},on:{click:t.okSubmit}},[t._v("确认分拆")])],1)],1),t._v(" "),a("Row",[t.table.data.length>0?a("Col",{staticClass:"toastDetails"},[t._v("\n        初始数据选中 "),a("code",[t._v(t._s(t.checkBoxList.length))]),t._v(" 条，共导入数据 "),a("code",[t._v(t._s(t.table.data.length))]),t._v(" 条，\n        奖金总额："),a("code",[t._v(t._s(t._f("formatMoney")(t.form.totalBonus,2)))]),t._v("，分拆总金额："),a("code",[t._v(t._s(t._f("formatMoney")(t.form.uncoveringTotalBonus,2)))]),t._v("。\n        ")]):t._e(),t._v(" "),a("Col",{staticClass:"table"},[a("Table",{ref:"previewSelection",attrs:{"row-class-name":t.rowClassName,columns:t.table.columns,data:t.table.data,height:"530",border:""}})],1)],1)],1)],1),t._v(" "),t.spinShow?a("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),a("ConfirmationSplit",{ref:"confirmationSplit",attrs:{"check-box-list":t.checkBoxList,"table-list":t.table,"form-item":t.form},on:{"on-ok":t.okBtnSubmit}})],1)},o=[];n._withStripped=!0},142:function(t,e,a){"use strict";a.r(e);var n=a(72),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a(145),i=a(0),l=!1;var c=function(t){l||a(143)},u=Object(i.a)(o.a,s.a,s.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\splitResult\\search\\component\\december.vue",e.default=u.exports},143:function(t,e,a){var n=a(144);"string"==typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);(0,a(6).default)("192c9ce1",n,!1,{})},144:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,"\n.december .count {\n  padding: 9px 9px 30px;\n  font-size: 12px;\n  display: block;\n  color: #000000;\n}\n.december .count span {\n  color: red;\n}\n",""])},145:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("Modal",{staticClass:"december",attrs:{"mask-closable":!1,title:1===t.status?"批量调整是否多次发薪：":"批量调整是否12月分摊："},on:{"on-cancel":function(e){t.cancel(!0)}},model:{value:t.modal1,callback:function(e){t.modal1=e},expression:"modal1"}},[1===t.status?a("span",{staticClass:"count"},[t._v("已选中 "),a("span",[t._v(t._s(t.checkBoxList.length))]),t._v(" 条数据，多次发薪状态为‘"+t._s(1===t.isModel?"是":"否")+"’")]):t._e(),t._v(" "),2===t.status?a("span",{staticClass:"count"},[t._v("已选中 "),a("span",[t._v(t._s(t.checkBoxList.length))]),t._v(" 条数据，12月分摊状态为‘"+t._s(1===t.isModel?"是":"否")+"’")]):t._e(),t._v(" "),a("Form",{attrs:{"label-width":80}},[a("FormItem",{attrs:{label:1===t.status?"多次发薪：":"12月分摊："}},[a("Select",{staticStyle:{width:"200px"},model:{value:t.selectModel,callback:function(e){t.selectModel=e},expression:"selectModel"}},[a("Option",{key:1,attrs:{value:1}},[t._v("是")]),t._v(" "),a("Option",{key:2,attrs:{value:2}},[t._v("否")])],1)],1)],1),t._v(" "),1===t.status?a("article",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.cancel(!0)}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{disabled:t.selectModelBtnFlag===t.selectModel,type:"primary"},on:{click:t.multiSalaryTab}},[t._v("确定")])],1):t._e(),t._v(" "),2===t.status?a("article",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"primary"},on:{click:function(e){t.cancel(!0)}}},[t._v("取消")]),t._v(" "),a("Button",{attrs:{disabled:t.selectModelBtnFlag===t.selectModel,type:"primary"},on:{click:t.decemberTab}},[t._v("确定")])],1):t._e()],1)},o=[];n._withStripped=!0},146:function(t,e,a){"use strict";a.d(e,"a",function(){return n}),a.d(e,"b",function(){return o});var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("XFrame",{staticClass:"search"},[a("Card",[a("Form",{ref:"splitSearch",attrs:{"label-width":80,model:t.form}},[a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"奖金类型",prop:"bonusType"}},[a("Select",{attrs:{clearable:""},on:{"on-change":t.bonustypebatchitemChange},model:{value:t.form.bonusType,callback:function(e){t.$set(t.form,"bonusType",e)},expression:"form.bonusType"}},t._l(t.$store.state.batch.typeitemInfo,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.text))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"归属期间",prop:"batchName"}},[a("Select",{attrs:{clearable:"",filterable:""},on:{"on-change":t.bonustypebatchitemInfoChange},model:{value:t.form.batchName,callback:function(e){t.$set(t.form,"batchName",e)},expression:"form.batchName"}},t._l(t.$store.state.batch.typebatchitemInfo,function(e){return a("Option",{key:e.value,attrs:{value:e.text}},[t._v(t._s(e.text))])}))],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"部门",prop:"deptId"}},[a("Select",{attrs:{clearable:"",filterable:""},model:{value:t.form.deptId,callback:function(e){t.$set(t.form,"deptId",e)},expression:"form.deptId"}},t._l(t.$store.state.batch.deptList,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"发放状态"}},[a("Select",{model:{value:t.form.extendState,callback:function(e){t.$set(t.form,"extendState",e)},expression:"form.extendState"}},[a("Option",{key:0,attrs:{value:0}},[t._v("全部")]),t._v(" "),a("Option",{key:2,attrs:{value:2}},[t._v("未发放")]),t._v(" "),a("Option",{key:1,attrs:{value:1}},[t._v("已发放")])],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"发放开始月"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{editable:!1,options:t.dateOptions3,type:"month",placeholder:"Select date",size:"large"},model:{value:t.form.grantStartMonth,callback:function(e){t.$set(t.form,"grantStartMonth",e)},expression:"form.grantStartMonth"}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"发放结束月"}},[a("DatePicker",{staticStyle:{width:"100%"},attrs:{editable:!1,options:t.dateOptions4,type:"month",placeholder:"Select date",size:"large"},model:{value:t.form.grantEndMonth,callback:function(e){t.$set(t.form,"grantEndMonth",e)},expression:"form.grantEndMonth"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"员工"}},[a("Employee",{attrs:{data:t.$store.state.com.emplsList,model:t.form.emplId,placeholder:"工号或姓名",clearable:""},on:{"on-change":t.onEmployeetChange,"on-query-change":t.searchEmployee}})],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"职级"}},[a("Cascader",{attrs:{data:t.rankList},model:{value:t.form.rank,callback:function(e){t.$set(t.form,"rank",e)},expression:"form.rank"}})],1)],1)],1),t._v(" "),a("Row",[a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"多次发薪"}},[a("Select",{model:{value:t.form.multiSalary,callback:function(e){t.$set(t.form,"multiSalary",e)},expression:"form.multiSalary"}},[a("Option",{key:0,attrs:{value:0}},[t._v("全部")]),t._v(" "),a("Option",{key:1,attrs:{value:1}},[t._v("是")]),t._v(" "),a("Option",{key:2,attrs:{value:2}},[t._v("否")])],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem",attrs:{label:"12月分摊"}},[a("Select",{model:{value:t.form.monthShare,callback:function(e){t.$set(t.form,"monthShare",e)},expression:"form.monthShare"}},[a("Option",{key:0,attrs:{value:0}},[t._v("全部")]),t._v(" "),a("Option",{key:1,attrs:{value:1}},[t._v("是")]),t._v(" "),a("Option",{key:2,attrs:{value:2}},[t._v("否")])],1)],1)],1),t._v(" "),a("Col",{attrs:{span:"8"}},[a("FormItem",{staticClass:"formItem"},[a("Button",{attrs:{type:"primary"},on:{click:t.searchList}},[t._v("查询")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.resetFields}},[t._v("重置")]),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:t.exportReportFormBtn}},[t._v("导出")]),t._v("  \n          ")],1)],1)],1)],1)],1),t._v(" "),a("Card",{staticClass:"table"},[t.isAdmin?a("Row",[t.table.checkBoxList.length>0?a("p",{staticClass:"selectCheckBoxList"},[t._v("\n        共选中\n        "),a("code",{staticClass:"red"},[t._v(t._s(t.table.checkBoxList.length))]),t._v("\n        条数据\n      ")]):t._e(),t._v(" "),a("Col",{staticClass:"export",attrs:{align:"right"}},[a("Button",{attrs:{disabled:t.table.checkBoxList.length<=0,type:"primary"},on:{click:t.muchTabClick}},[t._v("批量分拆")]),t._v("  \n        "),a("Button",{attrs:{disabled:t.table.checkBoxList.length<=0,type:"primary"},on:{click:function(e){t.decemberTab(1)}}},[t._v("调整多次发薪")]),t._v("  \n        "),a("Button",{attrs:{disabled:t.table.checkBoxList.length<=0,type:"primary"},on:{click:function(e){t.decemberTab(2)}}},[t._v("调整12月分摊")])],1)],1):t._e(),t._v(" "),a("br"),t._v(" "),a("Row",[a("Table",{ref:"table",attrs:{data:t.table.data,loading:t.table.loading,columns:t.table.tableColumns1,height:"450",stripe:""},on:{"on-selection-change":t.selectionChange}}),t._v(" "),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.form.total,current:t.form.start,"page-size":t.form.limit,"page-size-opts":t.pageSizeOpts,"show-sizer":"","show-total":""},on:{"on-page-size-change":t.pageSizeOptsChange,"on-change":t.changePage}})],1)])],1)],1),t._v(" "),a("single",{ref:"single",attrs:{data:t.singleData,"form-info":t.form},on:{getBonusGrid:t.getBonusGrid}}),t._v(" "),a("much",{ref:"much",attrs:{data:t.table,"form-info":t.form,"check-box-list":t.table.checkBoxList},on:{getBonusGrid:t.getBonusGrid}}),t._v(" "),a("december",{ref:"december",attrs:{"form-item":t.form,"data-info":t.table.data,"check-box-list":t.table.checkBoxList},on:{getBonusGrid:t.getBonusGrid}})],1)},o=[];n._withStripped=!0},49:function(t,e,a){"use strict";a.r(e);var n=a(68),o=a.n(n);for(var r in n)"default"!==r&&function(t){a.d(e,t,function(){return n[t]})}(r);var s=a(146),i=a(0),l=!1;var c=function(t){l||a(128)},u=Object(i.a)(o.a,s.a,s.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\splitResult\\search\\index.vue",e.default=u.exports},68:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(a(15));e.default={data:function(){var t=this;return{form:{bonusType:"",batchName:"",deptId:"",emplId:"",grantStartMonth:"",grantEndMonth:"",startMonth:"",endMonth:"",monthShare:0,multiSalary:0,extendState:0,rank:[],total:0,start:1,limit:20},ruleValidate:{bonusType:[{required:!0,message:"奖金类型不能为空",trigger:"change"}],batchName:[{required:!0,message:"奖金批次不能为空",trigger:"change"}],deptId:[{required:!0,message:"部门选择不能为空",trigger:"change"}]},dataId:"",isAdmin:!1,table:{data:[],loading:!1,tableColumns1:[{type:"selection",minWidth:60,align:"center",fixed:"left"},{title:"员工编号",key:"emplId",fixed:"left",minWidth:80,render:function(e,a){var n=t;return e("span",{style:{textDecoration:"underline",color:"blue"},on:{click:function(t){n.singleData=a.row,n.$refs.single.singleSplit.modal1=!0}}},a.row.emplId)}},{title:"员工姓名",key:"emplName",fixed:"left",minWidth:80},{title:"职级",key:"jobRank",minWidth:100,align:"center"},{title:"职位",key:"jobPost",minWidth:130},{title:"部门",key:"emplDep",minWidth:260},{title:"奖金类型",key:"typeName",minWidth:100,align:"center"},{title:"奖金归属",key:"depName",minWidth:100},{title:"归属期间",key:"batchCode",minWidth:100},{title:"归属开始月",key:"startMonth",minWidth:100,render:function(e,a){return e("span",t.formatDate(a.row.startMonth))}},{title:"归属结束月",key:"endMonth",minWidth:100,render:function(e,a){return e("span",t.formatDate(a.row.endMonth))}},{title:"奖金名称",key:"batchName",minWidth:260,align:"center"},{title:"奖金金额",key:"bonusValue",minWidth:80},{title:"奖金发放月",key:"grantMonth",minWidth:100,render:function(e,a){return e("span",t.formatDate(a.row.grantMonth))}},{title:"发放状态",key:"status",minWidth:80,render:function(t,e){var a="未发放";return 3==e.row.status&&(a="已发放"),t("span",a)}},{title:"多次发薪",key:"multiSalary",align:"center",minWidth:100,render:function(t,e){var a="是";return"2"==e.row.multiSalary&&(a="否"),t("span",a)}},{title:"12月分摊",key:"monthShare",align:"center",minWidth:100,render:function(t,e){var a="是";return"2"==e.row.monthShare&&(a="否"),t("span",a)}},{title:"备注",key:"preIssuesDes",minWidth:80},{title:"操作人",key:"lastUpdateUser",minWidth:80},{title:"操作时间",key:"lastUpdateTime",minWidth:180,render:function(t,e){return t("span",e.row.lastUpdateTime&&new Date(e.row.lastUpdateTime).Format("yyyy-MM-dd hh:mm:ss"))}}],checkBoxList:[]},singleData:{},rankList:[]}},components:{single:a(130).default,much:a(134).default,december:a(142).default},computed:{dateOptions3:function(t){var e=this;return{disabledDate:function(t){var a=e.form.grantEndMonth;return t&&t.valueOf()>new Date(a).valueOf()}}},dateOptions4:function(t){var e=this;return{disabledDate:function(t){var a=e.form.grantStartMonth;return t&&t.valueOf()<new Date(a).valueOf()-864e5}}},pageSizeOpts:function(){return[20,60,100,this.form.total]}},watch:{},created:function(){var t=this;this.$store.dispatch("getTypeitemInfo"),this.$store.dispatch("getDeptList"),n.default.jobrankList({success:function(e){var a={},n=[];if(e=e.data){for(var o=0;o<e.length;o++){var r=e[o].value.slice(0,1);a[r]||(a[r]={label:r+"系列",value:r+"系列",children:[]})}a["1-4级员工"]={label:"1-4级员工",value:"level4StaffUnder",children:[]},a["5级及以上员工"]={label:"5级及以上员工",value:"level5Employees",children:[]};for(var s=0;s<e.length;s++){var i=e[s].value.slice(0,1);a[i]&&(e[s].label=e[s].value,a[i].children.push(e[s]))}Object.keys(a).map(function(t){n.push(a[t])}),t.rankList=[].concat(n).reverse()}},error:function(e){t.$Message.error(e)}}),this.getBonusGrid(),this.isShowAdmin()},methods:{exportReportFormBtn:function(){var t=this.form,e=0;t.rank.length>=2&&(e=1);var a=[];for(var n in t){if("grantEndMonth"===n||"grantStartMonth"===n){var o=t[n]&&new Date(t[n]).format("yyyy-MM");a.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}if("rank"===n){var r=t[n][e]||"";a.push(encodeURIComponent(n)+"="+encodeURIComponent(r))}"rank"!=n&&"grantEndMonth"!=n&&"grantStartMonth"!=n&&a.push(encodeURIComponent(n)+"="+encodeURIComponent(t[n]))}var s=a.join("&");window.location.href=utils.url.curr+"/sylla/phr-ui/bonus/bonusresultsearch/export?"+s},pageSizeOptsChange:function(t){this.form.limit=t||20,this.getBonusGrid()},searchList:function(){this.form.start=1,this.getBonusGrid(!1)},decemberTab:function(t){var e=this.table,a=1===t?"multiSalary":"monthShare",n=1===t?"多次发薪":"12月分摊",o="",r=[];e.checkBoxList.map(function(t){for(var n=0;n<e.data.length;n++)if(t===e.data[n].id){r.push(e.data[n]),o+=e.data[n][a]+",";break}});for(var s={},i=0;i<o.length;++i){var l=o.charAt(i),c=s[l];c||(c=0),c++,s[l]=c}var u=!1,d=[];if(r.length>0)for(var m=0;m<r.length;m++)"2"===r[m].canEdit&&(u=!0,d.push(r[m].emplName+"("+r[m].emplId+")"));return u?this.$Modal.warning({title:"提示信息",content:'<span class="red">'+d.join(",")+" </span><br/>奖金已发放，不允许修改"}):(s[1]||s[2])!==e.checkBoxList.length?this.warning(n):(this.$refs.december.modal1=!0,this.$refs.december.status=t||1,this.$refs.december.selectModel=r[0][a],this.$refs.december.isModel=r[0][a],void(this.$refs.december.selectModelBtnFlag=r[0][a]))},warning:function(t){this.$Modal.warning({title:"提示信息",content:"所选员工的"+t+"状态不同，请调整为全部为‘是’或者全部为‘否’员工集合"})},isShowAdmin:function(){var t=this;n.default.isAdmin({success:function(e){0===e.status&&1===e.data?t.isAdmin=!0:t.isAdmin=!1},error:function(e){t.$Message.error(e)}})},resetFields:function(){this.form={bonusType:"",batchName:"",deptId:"",emplId:"",grantStartMonth:"",grantEndMonth:"",startMonth:"",endMonth:"",monthShare:0,multiSalary:0,extendState:0,rank:[],total:1,start:1,limit:20},this.$refs.splitSearch.resetFields(),this.getBonusGrid()},onEmployeetChange:function(t){this.form.emplId=t},searchEmployee:function(t){this.$store.dispatch("getEmployees",{val:(t||"").trim(),lcState:"HIRED,LEFT_PROCESSING,LEFT"})},formatDate:function(t){return t?new Date(t).Format("yyyy-MM"):""},selectionChange:function(t){var e=this;this.table.checkBoxList=[],t&&t.map(function(t){e.table.checkBoxList.push(t.id)})},bonustypebatchitemChange:function(t){this.$store.dispatch("getBonustypebatchitem",t)},bonustypebatchitemInfoChange:function(t){if(t){for(var e=this.$store.state.batch.typebatchitemInfo,a=0;a<e.length;a++)if(e[a].text==t){var n=e[a],o=n.sugText&&n.sugText.split("-"),r=n.value&&n.value.split("-");this.form.grantStartMonth=this.valCheck(o[0]),this.form.grantEndMonth=this.valCheck(o[1]),this.form.startMonth=this.valCheck(r[0]),this.form.endMonth=this.valCheck(r[1]);break}}else this.form.grantStartMonth="",this.form.grantEndMonth="",this.form.startMonth="",this.form.endMonth=""},valCheck:function(t){return t&&t.replace(/^(\d{4})(\d{2})$/,"$1-$2")||""},changePage:function(t){this.form.start=t,this.getBonusGrid()},getBonusGrid:function(t){if(t){var e=!1;if(this.$refs.splitSearch.validate(function(t){e=t}),!e)return}var a=this,o=this.form;a.table.checkBoxList=[],a.table.loading=!0,n.default.getBonusGrid({data:o,success:function(t){a.table.loading=!1,t?(a.table.data=t.data,a.form.total=t.totalCount):a.$Message.info(t.statusText||"服务器异常，请联系管理员")},error:function(t){a.table.loading=!1,a.$Message.error(t)}})},muchTabClick:function(){var t=this.table,e=[];t.checkBoxList.map(function(a){for(var n=0;n<t.data.length;n++)if(a===t.data[n].id){e.push(t.data[n]);break}});var a=!1,n=[];if(e.length>0)for(var o=0;o<e.length;o++)"2"===e[o].canEdit&&(a=!0,n.push(e[o].emplName+"("+e[o].emplId+")"));if(a)return this.$Modal.warning({title:"提示信息",content:'<span class="red">'+n.join("，")+" </span><br/>奖金已发放，不允许修改"});this.$refs.much.table={columns:[],data:[],loading:!1},this.$refs.much.muchPartition.modal1=!0}}}},69:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(a(15));e.default={props:{data:{type:[Array,Object],default:function(){return[]}},formInfo:{type:Object,default:function(){}}},data:function(){var t=this;return{formDynamic:{item:[{id:"",months:"",values:0,monthShares:!1,multiSalarys:!1,depts:""}],ruleValidate:{months:[{validator:function(t,e,a){e?a():a(new Error("batch.editor.validator.needControllers"))},message:"请选择月份",trigger:"change"}],values:[{required:!0,type:"number",message:"请选择金额",trigger:"change"},{type:"number",trigger:"change",validator:function(e,a,n){a>0&&a<=t.data.bonusValue?n():n(new Error("大于0，小于等于原总金额"))},transform:function(t){return t&&(t=Number(t.toFixed(2))),t}}],depts:[{required:!0,type:"string",message:"请选择部门",trigger:"change"}]}},singleSplit:{modal1:!1,canEdit:""}}},computed:{},watch:{"singleSplit.modal1":function(){var t=this.formDynamic,e=this.data;if(e&&e.id){for(var a=0;a<t.item.length;a++){var n=t.item[a];a<=0&&(n.id=e.id,n.months=new Date(e.grantMonth).format("yyyy-MM"),n.values=e.bonusValue,n.monthShares=2!==e.monthShare,n.multiSalarys=2!==e.multiSalary,n.depts=e.depId)}this.singleSplit.canEdit=e.canEdit}}},mounted:function(){},created:function(){},methods:{onCancel:function(){var t=this;t.formDynamic.item=[{id:"",months:"",values:0,monthShares:!1,multiSalarys:!1,depts:""}],t.formInfo.start=1,t.singleSplit.modal1=!1,t.$emit("getBonusGrid"),setTimeout(function(){t.$refs.formValidate.resetFields()},0)},submitOk:function(){var t=this,e=this.formDynamic,a=!1;this.$refs.formValidate.validate(function(t){a=t}),a&&n.default.singleSubmit({data:{id:this.data.id,item:e.item},success:function(e){0!==e.status?t.$Message.info(e.statusText):t.onCancel()},error:function(t){console.error(t)}})},handleAdd:function(){this.formDynamic.item.push({months:"",values:0,monthShares:!1,multiSalarys:!1,depts:this.data.depId||""})},handleDel:function(t){for(var e=this.formDynamic.item,a=0;a<e.length;a++)if(t===a){this.formDynamic.item.splice(a,1);break}}}}},70:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(a(15)),o=r(a(137));function r(t){return t&&t.__esModule?t:{default:t}}e.default={components:{ConfirmationSplit:o.default},props:{data:{type:[Array,Object],default:function(){return[]}},formInfo:{type:Object,default:function(){}},checkBoxList:{type:[Array,Object],default:function(){return[]}}},data:function(){return{form:{uncoveringTotalBonus:"",totalBonus:"",dataId:""},muchPartition:{modal1:!1},table:{columns:[],data:[],loading:!1},spinShow:!1}},computed:{actionUpload:function(){var t=this.checkBoxList,e=[],a={type:4,batchCode:t.length>0?t.join(","):""};for(var n in a)e.push(encodeURIComponent(n)+"="+encodeURIComponent(a[n]));return"/sylla/phr-ui/bonus/import/start?"+(e=e.join("&"))},isShowimport:function(){var t=this.table.data,e=!0;if(t.length>0)for(var a=0;a<t.length&&"正确"===t[a].errorMsg;a++)e=!1;return e}},created:function(){},methods:{okExportTable:function(){this.form.dataId&&(window.location.href=utils.url.curr+"/sylla/phr-ui/bonus/import/download?dataId="+this.form.dataId)},rowClassName:function(t){return"正确"!==t.errorMsg?"demo-table-error-row":""},onProgress:function(){this.spinShow=!0},uploadSuccess:function(t){this.spinShow=!1;var e=this;e.table.loading=!0,0===t.status?(e.form.dataId=t.data,n.default.getGrid({dataId:t.data,success:function(t){e.table.loading=!1;var a=t.data;if(t){for(var n=[{key:"errorMsg",title:"提示信息",minWidth:160,align:"center"}],o=0;o<a.columnName.length;o++)n.push({key:a.columnCode[o],title:a.columnName[o],minWidth:120});e.$set(e.table,"columns",[].concat(n)),e.$set(e.table,"data",[].concat(function(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}(a.data))),e.form.totalBonus=a.totalBonus,e.form.uncoveringTotalBonus=a.uncoveringTotalBonus}},error:function(t){e.table.loading=!1}})):(e.table.loading=!1,this.$Message.info(t.statusText))},uploadError:function(t){this.spinShow=!1,this.table.loading=!1,this.$Message.error(t.message)},formatErrorUpload:function(){this.$Message.warning("请上传正确的模板")},onCancel:function(t){var e=this;setTimeout(function(){e.muchPartition.modal1=!1,t||(e.$emit("getBonusGrid"),e.formInfo.start=1,e.data.checkBoxList=[])},10)},splitDataDown:function(){var t=this.checkBoxList;if(t.length>0){var e=t.join(",");window.location.href=utils.url.curr+"/sylla/phr-ui/bonus/batchmortar/download?ids="+e}else this.$Message.error("奖金类型ID丢失，请联系管理员")},okSubmit:function(){this.$refs.confirmationSplit.modal7=!0},moneyFormat:function(t){return utils.number_format({decimals:2,number:t,dec_point:".",thousands_sep:","})},okBtnSubmit:function(){var t=this.form,e=this;n.default.confirmSplit({dataId:t.dataId,success:function(t){if(0===t.status){var a=e.moneyFormat(e.form.totalBonus),n=e.moneyFormat(e.form.uncoveringTotalBonus);e.$Modal.success({title:"操作成功",content:'<p>奖金总额：<code class="red">'+a+'</code></p><p>分拆总金额：<code class="red">'+n+"</code></p>",onOk:function(){e.$refs.confirmationSplit.modal7=!1,e.muchPartition.modal1=!1,e.onCancel(),e.$Message.success("批量分拆成功")}})}else e.$Message.info(t.statusText||"服务器异常，请联系管理员")},error:function(t){e.$Message.error(t)}})}}}},71:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{info:{type:Object,default:function(){}},rewardName:{type:String,default:""},formItem:{type:Object,default:function(){return{}}},checkBoxList:{type:[Array,Object],default:function(){return[]}},tableList:{type:Object,default:function(){return{}}}},data:function(){return{modal7:!1,loading:!1}},methods:{asyncOK:function(){this.$emit("on-ok")},asyncCancel:function(){this.$emit("on-cancel")}}}},72:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(t){return t&&t.__esModule?t:{default:t}}(a(15));e.default={props:{checkBoxList:{type:[Array,Object],default:function(){return[]}},dataInfo:{type:[Array],default:function(){return[]}},formItem:{type:Object,default:function(){}}},data:function(){return{isModel:0,selectModel:0,status:1,modal1:!1,selectModelBtnFlag:!1}},watch:{},methods:{multiSalaryTab:function(){var t=this,e=this.checkBoxList,a=this.selectModel;n.default.muchPay({data:{ids:e.join(","),multiSalary:a},success:function(e){0===e.status?(t.$Message.success("操作成功"),t.formItem.multiSalary=0,t.formItem.start=1,t.cancel()):t.$Message.info(e.statusText||"服务器异常，请联系管理员")},error:function(e){t.$Message.error(e)}})},decemberTab:function(){var t=this,e=this.checkBoxList,a=this.selectModel;n.default.decemberTab({data:{ids:e.join(","),monthShare:a},success:function(e){0===e.status?(t.formItem.monthShare=0,t.$Message.success("操作成功"),t.formItem.start=1,t.cancel()):t.$Message.info(e.statusText||"服务器异常，请联系管理员")},error:function(e){t.$Message.error(e)}})},cancel:function(t){this.modal1=!1,t||this.$emit("getBonusGrid")}}}}}]);