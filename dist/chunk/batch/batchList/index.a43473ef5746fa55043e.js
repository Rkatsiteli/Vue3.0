(window.webpackJsonpso=window.webpackJsonpso||[]).push([[5],{104:function(t,e,n){var a=n(105);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(6).default)("acf672da",a,!1,{})},105:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'\n.batchMain-centent {\n  margin: 5px;\n  min-width: 1200px;\n  overflow: auto;\n}\n.informationDia-section div {\n  line-height: 25px;\n  font-size: 12px;\n  color: #333333;\n  margin-left: 16px;\n}\n.informationDia-section div b {\n  color: red;\n  position: relative;\n  top: 2px;\n}\n.informationDia-section .title {\n  font-size: 15px;\n  color: #222222;\n  font-weight: 500;\n  padding: 12px 0px 3px;\n}\n.informationDia-sectionLabel {\n  margin-right: 30px;\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n}\n.informationDia-sectionLabel input[type="checkbox"] {\n  position: relative;\n  top: 2px;\n}\n',""])},106:function(t,e,n){"use strict";n.r(e);var a=n(63),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var i=n(119),s=n(0),l=!1;var c=function(t){l||n(107)},u=Object(s.a)(o.a,i.a,i.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\batchList\\index.vue",e.default=u.exports},107:function(t,e,n){var a=n(108);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(6).default)("7ab01c49",a,!1,{})},108:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,'\n.batch {\n  cursor: pointer;\n}\n.batch .formItem {\n  padding: 6px 12px;\n  margin: 0px auto;\n}\n.batch .required .ivu-form-item-label:before {\n  content: "*";\n  color: red;\n  font-weight: bold;\n}\n.batch .requiredError .ivu-select-selection,\n.batch .requiredError .ivu-input {\n  border: 1px solid #ffd0ce;\n}\n.batch .btns {\n  display: flex;\n  display: -webkit-box;\n}\n.batch .btns .importLog {\n  margin-left: 16px;\n}\n.batch .downBtns {\n  padding: 6px 12px;\n  margin: 0;\n}\n.batch-table {\n  margin-top: 12px;\n}\n.batch-table th {\n  font-size: 12px;\n}\n.batch-table td {\n  font-size: 12px;\n}\n.batch-table .export {\n  position: absolute;\n  right: 0;\n  top: -30px;\n}\n.batch-table .moneyCount {\n  width: calc(100% - 190px);\n  margin-bottom: 18px;\n  color: #222222;\n  font-size: 12px;\n}\n.batch-table .moneyCount span {\n  color: red;\n}\n.batch-table .preprocessing {\n  color: #999999;\n  font-size: 14px;\n  margin-bottom: 12px;\n}\n.batch .ivu-table .demo-table-error-row td {\n  background-color: rgba(241, 67, 67, 0.5);\n  color: #fff;\n}\n.batch .ivu-table .demo-table-info-row td {\n  background-color: #2db7f5;\n  color: #fff;\n}\n.batch .red {\n  color: red;\n  font-size: 14px;\n  font-family: sans-serif;\n}\n.batch .redFont {\n  color: red;\n}\n.batch .ff6600 td {\n  background-color: #f5f1c6;\n  color: #333333;\n}\n.ivu-message {\n  top: 62px !important;\n}\n',""])},109:function(t,e,n){"use strict";n.r(e);var a=n(64),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var i=n(112),s=n(0),l=!1;var c=function(t){l||n(110)},u=Object(s.a)(o.a,i.a,i.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\batchList\\component\\information.vue",e.default=u.exports},110:function(t,e,n){var a=n(111);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(6).default)("670d9998",a,!1,{})},111:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,"\n.batchToast div {\n  margin-bottom: 5px;\n}\n.batchToast code {\n  color: red;\n}\n",""])},112:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{attrs:{loading:t.loading,"mask-closable":!1,title:"提示信息","on-cancel":"asyncCancel"},on:{"on-ok":t.asyncOK},model:{value:t.modal6,callback:function(e){t.modal6=e},expression:"modal6"}},[n("article",{staticClass:"batchToast"},[n("div",[t._v("总人数： "),n("code",[t._v(t._s(t.dataInfo.totalNum))]),t._v(" 人；")]),t._v(" "),n("div",[t._v("总金额： "),n("code",[t._v(t._s(t._f("formatMoney")(t.dataInfo.totalBonus,2)))]),t._v(" 元；")]),t._v(" "),void 0!=t.dataInfo.uncoveringTotalNum?n("div",[t._v("其中分拆人数： "),n("code",[t._v(t._s(t.dataInfo.uncoveringTotalNum))]),t._v(" 人；")]):t._e(),t._v(" "),void 0!=t.dataInfo.uncoveringTotalBonus?n("div",[t._v("分拆金额： "),n("code",[t._v(t._s(t._f("formatMoney")(t.dataInfo.uncoveringTotalBonus,2)))]),t._v(" 元")]):t._e(),t._v(" "),void 0!=t.dataInfo.uncoveringTotalNum||void 0!=t.dataInfo.uncoveringTotalBonus?n("div",[t._v("分拆部分会在年底二次发薪时分摊12个月计税发放。")]):t._e(),t._v(" "),n("div",[t._v("应发奖金比例： "),n("code",[t._v(t._s(t.dataInfo.percentage))])]),t._v(" "),n("div",[t._v("奖金归属期间： "),n("code",[t._v(t._s(t.dataInfo.realBatchCodeName))])]),t._v(" "),n("div",[t._v("发放开始月： "),n("code",[t._v(t._s(t.dataInfo.grantStartMonthYM))])]),t._v(" "),n("div",[t._v("发放结束月： "),n("code",[t._v(t._s(t.dataInfo.grantEndMonthYM))])]),t._v(" "),n("div",[t._v("确认导入“"),n("code",[t._v(t._s(t.rewardName))]),t._v("”的奖金数据吗？")])])])},o=[];a._withStripped=!0},113:function(t,e,n){"use strict";n.r(e);var a=n(65),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var i=n(118),s=n(0),l=!1;var c=function(t){l||(n(114),n(116))},u=Object(s.a)(o.a,i.a,i.b,!1,c,"data-v-d24c6c16",null);u.options.__file="src\\page\\bonus\\batchList\\downBonus.vue",e.default=u.exports},114:function(t,e,n){var a=n(115);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(6).default)("7ffab650",a,!1,{})},115:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,"\n.downBonusModal .container[data-v-d24c6c16] {\n  /* h2 {\n      font-size: 16px;\n      color: #202020;\n      font-weight: normal;\n    } */\n}\n.downBonusModal .content[data-v-d24c6c16] {\n  margin: 3px 12px;\n}\n.downBonusModal .content .sectionItem[data-v-d24c6c16] {\n  display: flex;\n  display: -webkit-flex;\n  margin-bottom: 6px;\n}\n.downBonusModal .content .sectionItem .title[data-v-d24c6c16] {\n  color: #666666;\n  font-size: 14px;\n  display: block;\n  flex: 1;\n  -webkit-flex: 1;\n  width: 100%;\n}\n.downBonusModal .content .sectionItem button[data-v-d24c6c16] {\n  display: block;\n  border: none;\n  padding: 3px 12px;\n  font-size: 12px;\n  border-radius: 3px;\n  background: #2d8cf0;\n  color: #ffffff;\n  outline: none;\n}\n.downBonusModal .content ul[data-v-d24c6c16] {\n  width: 400px;\n  margin-bottom: 26px;\n}\n.downBonusModal .content ul .flex[data-v-d24c6c16] {\n  display: flex;\n  display: -webkit-flex;\n}\n.downBonusModal .content ul .flex section[data-v-d24c6c16] {\n  width: 50%;\n  padding: 8px 2px;\n  border-bottom: 1px solid #f7f7f7;\n}\n.downBonusModal .content ul .flex section span[data-v-d24c6c16]:first-child {\n  color: #202020;\n  margin-right: 12px;\n}\n.downBonusModal .footerButton[data-v-d24c6c16] {\n  text-align: center;\n  display: block;\n  border: none;\n  padding: 6px 12px;\n  font-size: 12px;\n  border-radius: 3px;\n  background: #2d8cf0;\n  color: #ffffff;\n  outline: none;\n  width: 100px;\n  margin: 8px auto 0;\n  cursor: pointer;\n}\n",""])},116:function(t,e,n){var a=n(117);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(6).default)("3c532870",a,!1,{})},117:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,"\n.downBonusModal2 .ivu-modal-mask,\n.downBonusModal2 .ivu-modal-wrap {\n  z-index: 1200;\n}\n.downBonusModal2 .ivu-modal-wrap {\n  top: 7%;\n}\n",""])},118:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{staticClass:"downBonusModal",attrs:{"mask-closable":!1,"z-index":1100,width:"500","footer-hide":""},on:{"on-cancel":function(e){t.$emit("downBonusCacel")},close:function(e){t.$emit("downBonusCacel")}},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[n("p",{staticStyle:{color:"#f60","text-align":"left"},attrs:{slot:"header"},slot:"header"},[n("span",[t._v("奖金底表下载")])]),t._v(" "),n("section",{staticClass:"container"},[n("div",{staticClass:"content"},[n("section",{staticClass:"sectionItem"},[n("span",{staticClass:"title"},[t._v("绩效分数及裁量结果对应关系")]),t._v(" "),n("button",{on:{click:function(e){t.toUpdate("relation")}}},[t._v("去修改")])]),t._v(" "),n("ul",t._l(t.objList.discretions,function(e){return n("li",{key:e},t._l(e.beans,function(e){return n("div",{key:e,staticClass:"flex"},[n("section",[n("span",[t._v("得分")]),t._v(" "),n("span",[n("label",{staticStyle:{width:"23px",display:"inline-block","text-align":"center"}},[t._v(t._s(e.fractionStart))]),t._v("\n                ---\n                "),n("label",{staticStyle:{width:"23px",display:"inline-block","text-align":"center"}},[t._v(t._s(e.fractionEnd))])])]),t._v(" "),n("section",[n("span",[t._v("个人裁量结果")]),t._v(" "),n("span",[t._v(t._s(e.discretionRatio)+"%")])])])}))})),t._v(" "),n("section",{staticClass:"sectionItem"},[n("span",{staticClass:"title"},[t._v("个人、组织绩效占比")]),t._v(" "),n("button",{on:{click:function(e){t.toUpdate("proportion")}}},[t._v("去修改")])]),t._v(" "),n("ul",t._l(t.objList.performances,function(e){return n("li",{key:e},t._l(e.beans,function(e){return n("div",{key:e,staticClass:"flex"},[n("section",[n("span",[t._v("职级")]),t._v(" "),n("span",[n("label",{staticStyle:{width:"23px",display:"inline-block","text-align":"center"}},[t._v(t._s(e.job_rank_start))]),t._v("\n                ---\n                "),n("label",{staticStyle:{width:"23px",display:"inline-block","text-align":"center"}},[t._v(t._s(e.job_rank_end))])])]),t._v(" "),n("section",{staticStyle:{"margin-left":"40px"}},[n("span",[t._v("个人")]),t._v(" "),n("span",[t._v(t._s(e.individual_ratio)+"%")])]),t._v(" "),n("section",[n("span",[t._v("组织")]),t._v(" "),n("span",[t._v(t._s(e.org_ratio)+"%")])])])}))}))]),t._v(" "),n("div",{staticClass:"footerButton",on:{click:t.downLoad}},[t._v("\n      确认下载\n    ")])]),t._v(" "),n("Modal",{staticClass:"downBonusModal downBonusModal2",attrs:{"mask-closable":!1,"z-index":1200,draggable:"",scrollable:"",width:"600","header-hide":"","footer-hide":""},on:{"on-cancel":function(e){t.showModal12(!1)},close:function(e){t.showModal12(!1)}},model:{value:t.modal12,callback:function(e){t.modal12=e},expression:"modal12"}},[n("div",{staticStyle:{padding:"20px","text-align":"center","font-size":"14px",color:"#212121"}},[n("span",[t._v(t._s(t.statusText))])]),t._v(" "),n("div",{staticClass:"footerButton",on:{click:t.downLoadOpen}},[t._v("\n      确认下载\n    ")])])],1)},o=[];a._withStripped=!0},119:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"batch"},[n("Card",[n("Form",{attrs:{"label-width":80}},[n("Row",[n("Col",{attrs:{span:"5"}},[n("FormItem",{staticClass:"formItem required",attrs:{label:"奖金类型"}},[n("Cascader",{class:t.form.bonusType?"":"requiredError",attrs:{required:"",clearable:"",data:t.$store.state.batch.typeitemInfo},on:{"on-change":t.bonustypebatchitemChange},model:{value:t.form.bonusType,callback:function(e){t.$set(t.form,"bonusType",e)},expression:"form.bonusType"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"5"}},[n("FormItem",{staticClass:"formItem required",attrs:{label:"归属期间"}},[n("Select",{class:t.form.batchName?"":"requiredError",attrs:{clearable:"",filterable:""},on:{"on-change":t.bonustypebatchitemInfoChange},model:{value:t.form.batchName,callback:function(e){t.$set(t.form,"batchName",e)},expression:"form.batchName"}},t._l(t.$store.state.batch.typebatchitemInfo,function(e){return n("Option",{key:e.value,attrs:{value:e.text}},[t._v(t._s(e.text))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"5"}},[n("FormItem",{staticClass:"formItem required",attrs:{label:"部门"}},[n("Select",{class:t.form.deptId?"":"requiredError",attrs:{filterable:""},model:{value:t.form.deptId,callback:function(e){t.$set(t.form,"deptId",e)},expression:"form.deptId"}},t._l(t.$store.state.batch.deptList,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"5"}},[n("FormItem",{staticClass:"formItem required",attrs:{label:"薪资组"}},[n("Select",{class:t.form.salaryGroup?"":"requiredError",attrs:{filterable:""},on:{"on-change":t.salaryGroupChange},model:{value:t.form.salaryGroup,callback:function(e){t.$set(t.form,"salaryGroup",e)},expression:"form.salaryGroup"}},t._l(t.SALARY_GROUP,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.desc))])}))],1)],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"5"}},[n("FormItem",{staticClass:"formItem required",attrs:{label:"发放开始月"}},[n("DatePicker",{class:t.form.grantStartMonth&&"NaN-aN"!=t.form.grantStartMonth?"":"requiredError",staticStyle:{width:"100%"},attrs:{editable:!1,options:t.dateOptions3,type:"month",format:"yyyy-MM",placeholder:t.grantStartMonthDatePicker,size:"default"},on:{"on-open-change":function(e){return t.dateTimeOpenChange(e,"grantStartMonth",t.grantStartMonthDatePicker)}},model:{value:t.form.grantStartMonth,callback:function(e){t.$set(t.form,"grantStartMonth",e)},expression:"form.grantStartMonth"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"5"}},[n("FormItem",{staticClass:"formItem required",attrs:{label:"发放结束月"}},[n("DatePicker",{class:t.form.grantEndMonth&&"NaN-aN"!=t.form.grantEndMonth?"":"requiredError",staticStyle:{width:"100%"},attrs:{editable:!1,options:t.dateOptions4,type:"month",format:"yyyy-MM",placeholder:t.grantEndMonthDatePicker,size:"default"},on:{"on-open-change":function(e){return t.dateTimeOpenChange(e,"grantEndMonth",t.grantStartMonthDatePicker)}},model:{value:t.form.grantEndMonth,callback:function(e){t.$set(t.form,"grantEndMonth",e)},expression:"form.grantEndMonth"}})],1)],1),t._v(" "),n("Col",{attrs:{span:"5"}},[n("FormItem",{staticClass:"downBtns required",attrs:{label:"下载模板"}},[n("Select",{class:t.form.type?"":"requiredError",attrs:{filterable:""},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.downTemplate,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),t.form.bonusTypeName.indexOf("PM奖金")<0?n("Col",{staticClass:"downBtns",attrs:{span:"1"}},[n("Button",{attrs:{disabled:!t.form.type,type:"primary"},on:{click:function(e){t.downTemplateTab()}}},[t._v("下载模板")])],1):n("Col",{staticClass:"downBtns",attrs:{span:"1"}},[n("Button",{attrs:{disabled:!t.form.type,type:"primary"},on:{click:function(e){t.downTemplateTab("bottom")}}},[t._v("下载奖金底表")])],1)],1),t._v(" "),n("Row",[n("Col",{attrs:{span:"10"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"奖金名称"}},[n("Input",{attrs:{maxlength:30},model:{value:t.form.rewardName,callback:function(e){t.$set(t.form,"rewardName",e)},expression:"form.rewardName"}},[n("span",{attrs:{slot:"prepend"},slot:"prepend"},[t._v(t._s(t.rewardNameVal)+t._s(t.form.rewardName?"_"+t.form.rewardName:""))])])],1)],1),t._v(" "),n("Col",{attrs:{span:"4"}},[n("CheckboxGroup",{staticClass:"formItem"},[n("Checkbox",{attrs:{label:"全年分摊计税"},model:{value:t.form.monthShare,callback:function(e){t.$set(t.form,"monthShare",e)},expression:"form.monthShare"}}),t._v(" "),n("Checkbox",{attrs:{label:"多次发薪"},model:{value:t.form.multiSalary,callback:function(e){t.$set(t.form,"multiSalary",e)},expression:"form.multiSalary"}})],1)],1),t._v(" "),n("Col",{staticClass:"formItem btns",attrs:{span:"7"}},[n("Button",{staticStyle:{width:"86px"},attrs:{type:"primary"},on:{click:t.importPreview}},[t._v("导入")]),t._v(" "),n("Upload",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"upload",attrs:{action:t.actionUpload,"show-upload-list":!1,format:["xls","xlsx"],"on-format-error":t.formatErrorUpload,data:t.form,"on-progress":t.onProgress,"on-success":t.uploadSuccess,"on-error":t.uploadError}}),t._v(" "),n("router-link",{attrs:{to:{path:"/hr/bonus/batch/index/log"}}},[n("Button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary"}},[t._v("导入日志")])],1)],1)],1)],1)],1),t._v(" "),n("Card",{staticClass:"batch-table"},[n("Row",[n("Col",{staticClass:"preprocessing",attrs:{span:"4"}},[t._v("预处理结果")])],1),t._v(" "),n("Row",[t.isImport?n("Col",{staticClass:"moneyCount"},[t._v("\n      共导入员工\n      "),n("span",[t._v(t._s(t.table.totalNum))]),t._v("个，奖金总额\n      "),n("span",[t._v(t._s(t._f("formatMoney")(t.table.totalBonus,2)))]),t._v("元，\n      分拆总金额："),n("span",[t._v(t._s(t._f("formatMoney")(t.table.uncoveringTotalBonus,2)))]),t._v("元\n      "),t.table.percentage?n("code",[t._v("，应发奖金比例为："),n("span",[t._v(t._s(t.table.percentage))]),t._v(".")]):t._e()]):t._e(),t._v(" "),n("Col",{staticClass:"export"},[n("Button",{attrs:{disabled:!t.isImport,type:"primary"},on:{click:t.exportBonus}},[t._v("预览奖金结果")]),t._v(" "),n("Button",{staticStyle:{width:"86px"},attrs:{disabled:t.isShowimport,type:"primary"},on:{click:t.confirmTab}},[t._v("提交")])],1)],1),t._v(" "),n("Row",[n("Table",{ref:"table",attrs:{"row-class-name":t.rowClassName,columns:t.table.tableColumns1,data:t.table.data,height:"530"}})],1)],1),t._v(" "),t.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):t._e(),t._v(" "),n("Information",{ref:"information",attrs:{"reward-name":t.form.rewardNameVal+(t.form.rewardName?"_"+t.form.rewardName:""),"data-info":t.table},on:{"on-ok":t.asyncConfigOK}}),t._v(" "),n("DownBonus",{ref:"modal3",attrs:{formData:t.formData,formDataFormat:t.formDataFormat,isShow:t.modal3},on:{downBonusCacel:function(e){t.downBonusCacel()}}})],1)},o=[];a._withStripped=!0},120:function(t,e,n){"use strict";n.r(e);var a=n(66),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var i=n(123),s=n(0),l=!1;var c=function(t){l||n(121)},u=Object(s.a)(o.a,i.a,i.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\batchList\\list.vue",e.default=u.exports},121:function(t,e,n){var a=n(122);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(6).default)("4ab11e5d",a,!1,{})},122:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,"\n.batchList {\n  cursor: pointer;\n}\n.batchList .formItem {\n  padding: 6px 12px;\n  margin: 0px auto;\n}\n.batchList .required .ivu-form-item-label:before {\n  content: '*';\n  color: red;\n  font-weight: bold;\n}\n.batchList .btns {\n  display: flex;\n  display: -webkit-box;\n}\n.batchList .btns .importLog {\n  margin-left: 16px;\n}\n.batchList .downBtns {\n  padding: 6px 12px;\n  margin: 0;\n}\n.batchList-table {\n  margin-top: 12px;\n}\n.batchList-table th {\n  font-size: 12px;\n}\n.batchList-table td {\n  font-size: 12px;\n}\n.batchList-table .export {\n  position: absolute;\n  right: 0;\n  top: -30px;\n}\n.batchList-table .moneyCount {\n  width: calc(100% - 190px);\n  margin-bottom: 18px;\n  color: #222222;\n  font-size: 12px;\n}\n.batchList-table .moneyCount span {\n  color: red;\n}\n.batchList-table .preprocessing {\n  color: #999999;\n  font-size: 14px;\n  margin-bottom: 12px;\n}\n.batchList .ivu-table .demo-table-error-row td {\n  background-color: rgba(241, 67, 67, 0.5);\n  color: #fff;\n}\n.batchList .ivu-table .demo-table-info-row td {\n  background-color: #2db7f5;\n  color: #fff;\n}\n.batchList .red {\n  color: red;\n  font-size: 14px;\n  font-family: sans-serif;\n}\n.batchList .ff6600 td {\n  background-color: #f5f1c6;\n  color: #333333;\n}\n.batchList .ivu-page-prev i,\n.batchList .ivu-page-next i,\n.batchList .ivu-page-item-jump-next i {\n  position: relative;\n  top: 8px;\n}\n",""])},123:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"batchList"},[n("Card",[n("Form",{attrs:{"label-width":100}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"奖金类型"}},[n("Select",{class:t.form.bonusType?"":"requiredError",attrs:{required:""},on:{"on-change":t.bonustypebatchitemChange},model:{value:t.form.bonusType,callback:function(e){t.$set(t.form,"bonusType",e)},expression:"form.bonusType"}},t._l(t.$store.state.batch.typeitemInfo,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.text))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"奖金归属期间"}},[n("Select",{class:t.form.batchName?"":"requiredError",attrs:{filterable:""},on:{"on-change":t.bonustypebatchitemInfoChange},model:{value:t.form.batchName,callback:function(e){t.$set(t.form,"batchName",e)},expression:"form.batchName"}},t._l(t.$store.state.batch.typebatchitemInfo,function(e){return n("Option",{key:e.value,attrs:{value:e.text}},[t._v(t._s(e.text))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"奖金归属部门"}},[n("Select",{class:t.form.depId?"":"requiredError",attrs:{filterable:""},model:{value:t.form.depId,callback:function(e){t.$set(t.form,"depId",e)},expression:"form.depId"}},t._l(t.$store.state.batch.deptList,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"当前环节"}},[n("Select",{class:t.form.curActTitle?"":"requiredError",attrs:{filterable:""},model:{value:t.form.curActTitle,callback:function(e){t.$set(t.form,"curActTitle",e)},expression:"form.curActTitle"}},t._l(t.form.serialList,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"5"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"审批流水号"}},[n("Input",{model:{value:t.form.serialNumber,callback:function(e){t.$set(t.form,"serialNumber",e)},expression:"form.serialNumber"}})],1)],1),t._v(" "),n("Col",{staticClass:"formItem btns",attrs:{span:"8"}},[n("Button",{staticStyle:{width:"86px"},attrs:{type:"primary"},on:{click:t.getList}},[t._v("查询")]),t._v(" "),n("Button",{staticStyle:{"margin-left":"16px"},on:{click:t.formReset}},[t._v("重置")]),t._v(" "),n("Button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",disabled:t.table.checkBoxList.length<1},on:{click:t.bonusApproval}},[t._v("奖金审批")])],1)],1)],1)],1),t._v(" "),n("Card",{staticClass:"batch-table"},[n("Row",[n("Table",{ref:"table",attrs:{"row-class-name":t.rowClassName,columns:t.table.tableColumns1,data:t.table.data,loading:t.table.loading,stripe:"",height:"530"},on:{"on-selection-change":t.selectionChange}}),t._v(" "),n("Page",{staticStyle:{"margin-top":"10px"},attrs:{align:"right",total:t.table.total,current:t.table.start,"page-size":t.table.limit,"page-size-opts":t.pageSizeOpts,"show-sizer":"","show-total":""},on:{"on-page-size-change":t.pageSizeOptsChange,"on-change":t.changePage}})],1)],1),t._v(" "),t.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},o=[];a._withStripped=!0},124:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return o});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("XFrame",{staticClass:"batchMain"},[n("div",{staticClass:"batchMain-centent"},[n("Tabs",{attrs:{animated:!1,value:t.$route.query.type,type:"card"},on:{"on-click":t.change}},[n("TabPane",{attrs:{name:"index",label:"奖金批次导入"}},[t.flag||"index"==t.$route.query.type?n("Index"):t._e()],1),t._v(" "),n("TabPane",{attrs:{name:"list",label:"奖金批次列表"}},[t.flag||"list"==t.$route.query.type?n("List",{ref:"batchMainListRef"}):t._e()],1)],1)],1),t._v(" "),n("Modal",{staticClass:"informationDia",attrs:{"mask-closable":!1,width:"600"},on:{close:function(e){t.modal2=!1}},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("span",[t._v("提示信息")])]),t._v(" "),n("section",{staticClass:"informationDia-section"},[n("div",{staticClass:"title"},[t._v("1、奖金审批流程：")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("    导入奖金核对：奖金批次导入页面--点击“导入日志”--核对奖金是否导入成功（相关字段是否准确）；\n      ")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("    奖金审批：奖金审批页面—点击“新增”—添加奖金批次—提交前请点击“审批流预览”进行核查—提交审批（审批流程全部结束后奖金即进入工资计算）。\n      ")]),t._v(" "),n("div",{staticClass:"title"},[t._v("2、发放月和归属月：")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("  “发放月”为薪资月，正式员工为当月，派遣员工为上月；\n      ")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("  “归属月”为奖金所属月，奖金属于哪月或者哪个季度，就填写哪月。\n      ")]),t._v(" "),n("div",[t._v("举例说明：")]),t._v(" "),n("div",[t._v("2019年8月20日发放司机奖金，司机为派遣员工，派遣员工是下发薪，8月20日发放的是7月工资，故司机奖金发放月也为7月，8月份司机获得的是7月奖金，则归属月为7月。")]),t._v(" "),n("div",{staticClass:"title"},[t._v("3、月度奖金和月浮动工资：")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("  “月度奖金”是除月固定工资外，额外奖励员工的一笔独立奖金，只有正数，没有负数，录入月度PM奖金项，注意录入名称填为月度奖金；\n      ")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("  “月浮动工资”是从月固定工资中分拆出来，每月根据员工的表现选择全额发放或者部分发放，有正数，有负数，不属于奖金，无需录入。\n      ")]),t._v(" "),n("div",{staticClass:"title"},[t._v("4、奖金模板选择：")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("    司机奖金、催收奖金--录入其他奖金；\n      ")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("    月度奖金--录入月度PM奖金。\n      ")])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("label",{staticClass:"informationDia-sectionLabel"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.isNoReminder,expression:"isNoReminder"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isNoReminder)?t._i(t.isNoReminder,null)>-1:t.isNoReminder},on:{change:[function(e){var n=t.isNoReminder,a=e.target,o=!!a.checked;if(Array.isArray(n)){var r=t._i(n,null);a.checked?r<0&&(t.isNoReminder=n.concat([null])):r>-1&&(t.isNoReminder=n.slice(0,r).concat(n.slice(r+1)))}else t.isNoReminder=o},t.isNoReminderChange]}}),t._v("\n        不再提醒\n      ")]),t._v(" "),n("Button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.closeInformationDia()}}},[t._v("确定")])],1)])],1)},o=[];a._withStripped=!0},47:function(t,e,n){"use strict";n.r(e);var a=n(62),o=n.n(a);for(var r in a)"default"!==r&&function(t){n.d(e,t,function(){return a[t]})}(r);var i=n(124),s=n(0),l=!1;var c=function(t){l||n(104)},u=Object(s.a)(o.a,i.a,i.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\batchList\\main.vue",e.default=u.exports},56:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(n(14));e.default={BPFDIndex:function(t){a.default.com({url:"/sylla/phr-ui/bonusPerfomance/index",success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})},BPFDSave:function(t){a.default.com({url:"/sylla/phr-ui/bonusPerfomance/save",data:t.data,success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})},BPFDetail:function(t){a.default.com({url:"/sylla/phr-ui/bonusPerfomance/detail?id="+t.id,success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})},orgcodeList:function(t){a.default.com({url:"/sylla/phr-ui/bonus/normalorgcode/list",success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})},discIndex:function(t){a.default.com({url:"/sylla/phr-ui/bonusDiscretion/index",success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})},discSave:function(t){a.default.com({url:"/sylla/phr-ui/bonusDiscretion/save",data:t.data,success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})},discDetail:function(t){a.default.com({url:"/sylla/phr-ui/bonusDiscretion/detail?id="+t.id,success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})},authTabRole:function(t){a.default.com({url:"/sylla/phr-ui/bonusRule/authTabRole",success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})},checkOne:function(t){a.default.com({data:t.data,url:"/sylla/phr-ui/bonusRule/template/checkOne",success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})},checkTwo:function(t){a.default.com({data:t.data,url:"/sylla/phr-ui/bonus/template/checkTwo",success:function(e){return t.success&&t.success(e)},error:function(e){return t.error&&t.error(e)}})}}},62:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _index=__webpack_require__(106),_index2=_interopRequireDefault(_index),_list=__webpack_require__(120),_list2=_interopRequireDefault(_list);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.default={components:{Index:_index2.default,List:_list2.default},data:function(){var t=window.localStorage.closeInformationDia||!0;return{flag:"index",modal2:t=JSON.parse(t),isNoReminder:!1}},created:function(){},methods:{isNoReminderChange:function(){var t=this.isNoReminder;window.localStorage.closeInformationDia=!t},closeInformationDia:function(){this.isNoReminderChange(),this.modal2=!1},change:function(t){"list"===t&&(this.$refs.batchMainListRef.table.start=1,this.$refs.batchMainListRef.getList()),this.$router.replace({path:"/hr/bonus/batch/list?type="+t})},changeURLArg:function changeURLArg(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText),tmp}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText}}}},63:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _batchApi=__webpack_require__(15),_batchApi2=_interopRequireDefault(_batchApi),_propApi=__webpack_require__(56),_propApi2=_interopRequireDefault(_propApi),_comApi=__webpack_require__(14),_comApi2=_interopRequireDefault(_comApi),_information=__webpack_require__(109),_information2=_interopRequireDefault(_information),_downBonus=__webpack_require__(113),_downBonus2=_interopRequireDefault(_downBonus);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}exports.default={components:{Information:_information2.default,DownBonus:_downBonus2.default},data:function(){return{maxMonth:new Date+7776e6,minMonth:new Date-7776e6,modal3:!1,form:{bonusType:"",bonusTypeName:"",batchName:"",batchCode:"",deptId:"",deptName:"",grantStartMonth:"",grantEndMonth:"",startMonth:"",endMonth:"",monthShare:!1,multiSalary:!1,type:"",rewardName:"",rewardNameVal:"",salaryGroup:"",salaryGroupValue:""},spinShow:!1,dataId:"",downTemplate:[],table:{data:[],tableColumns1:[],totalNum:0,totalBonus:"0.0",percentage:"0%",uncoveringTotalNum:"",uncoveringTotalBonus:""},isImport:!1,grantStartMonthDatePicker:"",grantEndMonthDatePicker:"",SALARY_GROUP:[],formData:"",formDataFormat:""}},computed:{actionUpload:function(){return"/sylla/phr-ui/bonus/import/start?"+this.formatForm()},isShowimport:function(){var t=this.table.data,e=!0;if(t.length>0)for(var n=0;n<t.length&&!t[n].error;n++)e=!1;return e},dateOptions3:function(t){var e=this;return{disabledDate:function(t){var n=e.form.grantEndMonth;return t&&t.valueOf()>new Date(n).valueOf()}}},dateOptions4:function(t){var e=this;return{disabledDate:function(t){var n=e.form.grantStartMonth;return t&&t.valueOf()<new Date(n).valueOf()-864e5}}},rewardNameVal:function(){var t=this.form;return this.form.rewardNameVal=t.deptName+"_"+t.batchName+"_"+t.bonusTypeName}},watch:{"form.deptId":function(t){this.clearTable(),this.form.deptName=this.getName(this.$store.state.batch.deptList,t)},"form.bonusType":function(t){this.clearTable();for(var e="",n=0;n<t.length;n++)e+=this.getName(this.$store.state.batch.typeitemInfo,t[n])+"_";e=e&&e.substring(e,e.length-1),this.form.bonusTypeName=e},"table.data":function(t){for(var e=0;e<t.length;e++){if(t[e].error){this.isImport=!1;break}this.isImport=!0}},"form.type":function(){this.clearTable()},"form.salaryGroup":function(t){this.form;var e=this.SALARY_GROUP,n={};return e&&e.map(function(e){t==e.value&&(n=e)}),this.form.salaryGroupValue=n.desc}},created:function(){this.$store.dispatch("getTypeitemInfo"),this.$store.dispatch("getDeptList"),this.getSALARY_GROUP()},methods:{salaryGroupChange:function(t){var e=this;_batchApi2.default.accountedmaxyearmonth({value:t,success:function(t){0==t.status&&(e.grantStartMonthDatePicker=t.data||"",e.grantEndMonthDatePicker=t.data||"")},error:function(t){console.error(t)}})},getSALARY_GROUP:function(){var t=this;_comApi2.default.getDictionaries({type:"SALARY_GROUP",success:function(e){0==e.status&&(t.SALARY_GROUP=[].concat(_toConsumableArray(e.data)))},error:function(t){console.error(t)}})},formCheckBox:function(){var t=this.form;return t.bonusType?t.batchName?t.deptId?t.salaryGroup?t.grantStartMonth&&"NaN-aN"!=t.grantStartMonth?t.grantEndMonth&&"NaN-aN"!=t.grantEndMonth?t.type?"":"下载模板":"发放结束月":"发放开始月":"薪资组":"部门":"归属期间":"奖金类型"},dateTimeOpenChange:function(t,e,n){if(t){var a=n||"";this.form[e]=a,"grantStartMonth"==e?a=this.form[e]<this.form.grantEndMonth?n:"":"grantEndMonth"==e&&(a=this.form.grantStartMonth>this.form[e]?"":n),this.form[e]=a}},clearTable:function(){var t=this.table;return t.data=[],t.tableColumns1=[],t.totalNum=0,t.totalBonus="0.00",t.percentage="0%",this.isImport=!1,t},importPreview:function(){var t=this.formCheckBox();if(t)return this.$Message.error({content:t+"不能为空"});var e=this.form,n=this,a=!0,o=e.rewardName?e.rewardNameVal+"_"+e.rewardName:""+e.rewardNameVal;_batchApi2.default.batchnameCheck({batchName:o,success:function(t){0!==t.status&&(n.$Message.error(t.statusText),a=!1)}}),a&&n.$refs.upload.handleClick()},onProgress:function(){this.spinShow=!0},getName:function(t,e){var n="";if(e)for(var a=0;a<t.length;a++){if(e===t[a].value){n=t[a].label||t[a].text;break}var o=t[a].children||[];if(o.length>0)for(var r=0;r<o.length;r++)if(e===o[r].value){n=o[r].label||o[r].text;break}}return n},rowClassName:function(t){var e="";return t.waring?e="ff6600":t.error&&(e="demo-table-error-row"),e},bonustypebatchitemChange:function(t){this.clearTable(),t=t&&t[0],this.$store.dispatch("getBonustypebatchitem",t);var e=[{value:"10",label:"PM-季度/半年"},{value:"11",label:"PM-半年/全年"},{value:"9",label:"其他模板-人为指定"},{value:"12",label:"PM-季度/半年（空）"},{value:"13",label:"PM-半年/全年（空）"}],n=[];[{list:["otherBonus","seniorBonus","commisionBonus","businessBonus"],selectTemp:["9"]},{list:["quarterPM","monthPM","halfYearPM","yearPM"],selectTemp:["10","11","9","12","13"]}].map(function(e){e.list.includes(t)&&(n=[].concat(_toConsumableArray(e.selectTemp)))});for(var a=[],o=0;o<e.length;o++)n.includes(e[o].value)&&a.push(e[o]);this.downTemplate=[].concat(a)},bonustypebatchitemInfoChange:function(t){this.clearTable();for(var e=this.$store.state.batch.typebatchitemInfo,n=0;n<e.length;n++)if(e[n].text===t){var a=e[n],o=(a.sugText&&a.sugText.split("-"),a.value&&a.value.split("-"));this.form.batchCode=a.value,this.form.startMonth=this.valCheck(o[0]),this.form.endMonth=this.valCheck(o[1]);break}},valCheck:function(t){return t&&t.replace(/^(\d{4})(\d{2})$/,"$1-$2")||""},uploadSuccess:function(t){var e=this;0===t.status?(e.dataId=t.data,_batchApi2.default.getGrid({dataId:t.data,success:function(t){e.spinShow=!1;var n=t.data;if(t){for(var a=[{key:"errorMsg",title:"提示信息",minWidth:160,align:"center"}],o=0;o<n.columnName.length;o++)a.push({key:n.columnCode[o],title:n.columnName[o],minWidth:120});e.table.tableColumns1=[].concat(a),e.table.data=[].concat(_toConsumableArray(n.data)),e.table.totalNum=n.totalNum,e.table.totalBonus=n.totalBonus,e.table.percentage=n.percentage,e.table.uncoveringTotalNum=n.uncoveringTotalNum,e.table.uncoveringTotalBonus=n.uncoveringTotalBonus,e.table.grantStartMonthYM=n.grantStartMonthYM,e.table.grantEndMonthYM=n.grantEndMonthYM,e.table.realBatchCodeName=n.realBatchCodeName}},error:function(t){e.spinShow=!1,console.error(t.message)}})):(e.spinShow=!1,this.$Message.info(t.statusText))},uploadError:function(t){this.$Message.error(t.message)},formatErrorUpload:function(){this.$Message.warning("请上传正确的模板")},changeURLArg:function changeURLArg(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText),tmp}return url+"&"+replaceText},downTemplateTab:function(t){var e=this;if(t){if("bottom"===t){var n=this.formCheckBox();if(n)return this.$Message.error({content:n+"不能为空"});e.modal3=!0;var a=e.formatForm(),o=e.form,r=JSON.parse(JSON.stringify(o));if(12==o.type||13==o.type){o.isblank=1,a=e.changeURLArg(a,"isblank",1);var i="";12==o.type&&(i="10"),13==o.type&&(i="11"),r.type=i;var s=window.location;return e.modal3=!1,window.open(s.origin+"/sylla/phr-ui/bonus/template/download?"+a,"_blank")}o.isblank=0,a=e.changeURLArg(a,"isblank",0),e.formData=r,e.formDataFormat=a,_propApi2.default.checkOne({data:a,success:function(t){0!==t.status&&e.$Message.error(t.statusText),e.$refs.modal3.objList=t.data}})}}else{var l=window.location,c=this.form;window.open(l.origin+"/sylla/phr-ui/bonus/template/download?type="+c.type,"_blank")}},formatForm:function(){var t=this.form;t.grantStartMonth=new Date(t.grantStartMonth).format("yyyy-MM"),t.grantEndMonth=new Date(t.grantEndMonth).format("yyyy-MM");var e=JSON.parse(JSON.stringify(t)),n=[];for(var a in e){if("monthShare"!=a&&"multiSalary"!=a||n.push(encodeURIComponent(a)+"="+encodeURIComponent(0==t[a]?"2":"1")),"rewardName"===a){var o=t[a]?encodeURIComponent("_"+t[a]):t[a];n.push(encodeURIComponent(a)+"="+encodeURIComponent(t.rewardNameVal)+o)}if("monthShare"!==a&&"multiSalary"!==a&&"rewardName"!==a&&"type"!==a&&n.push(encodeURIComponent(a)+"="+encodeURIComponent(t[a])),"type"==a){var r="";r=12==e[a]?10:13==e[a]?11:e[a],n.push(encodeURIComponent(a)+"="+encodeURIComponent(r))}}return n.join("&")},exportBonus:function(){var t=window.location;this.dataId&&window.open(t.origin+"/sylla/phr-ui/bonus/import/download?dataId="+this.dataId+"&"+this.formatForm(),"_blank")},downBonusCacel:function(){this.modal3=!1},confirmTab:function(){this.$refs.information.modal6=!0},asyncConfigOK:function(){var t=this,e=this.form;t.spinShow=!0,e.dataId=t.dataId||"",_batchApi2.default.confirmSubmit({data:e,success:function(e){if(t.spinShow=!1,0===e.status){var n=utils.number_format({decimals:2,number:t.table.totalBonus,dec_point:".",thousands_sep:","});t.$Modal.success({title:"提示信息",content:'导入成功，<br/>已成功导入<code style="color:red">'+t.table.totalNum+'</code>个员工，奖金总额<code style="color:red">'+n+'</code>元。\n              <br/><code style="color:red">请前往【奖金审批】，新增奖金审批工单</code>'}),t.clearTable()}else t.$Modal.error({title:"提示信息",content:"导入失败，原因为："+e.statusText+"。请联系开发人员处理。"})},error:function(e){t.spinShow=!1,t.$Modal.error({title:"提示信息",content:"导入失败，原因为："+e.statusText+"。请联系开发人员处理。"})}})}}}},64:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={props:{dataInfo:{type:Object,default:function(){return{}}},rewardName:{type:String,default:""}},data:function(){return{modal6:!1,loading:!1}},methods:{asyncOK:function(){this.$emit("on-ok")},asyncCancel:function(){this.$emit("on-cancel")}}}},65:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){return t&&t.__esModule?t:{default:t}}(n(56));e.default={props:["isShow","formData","formDataFormat"],data:function(){return{objList:{discretions:[],performances:[]},modal12:!1,statusText:""}},methods:{showModal12:function(t){this.modal12=t},downLoad:function(){var t=this;a.default.checkTwo({data:t.formData,success:function(e){t.modal12=!0,0!==e.status&&(t.statusText=e.statusText)}})},downLoadOpen:function(){var t=window.location,e=this.formDataFormat;window.open(t.origin+"/sylla/phr-ui/bonus/template/download?"+e,"_blank"),this.modal12=!1,this.$emit("downBonusCacel")},toUpdate:function(t){var e="";"proportion"===t?e="/hr/bonus/relPro/index?name=proportion":"relation"===t&&(e="/hr/bonus/relPro/index?name=relation"),window.open(e,"_blank"),this.modal12=!1,this.$emit("downBonusCacel")}}}},66:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},o=function(t){return t&&t.__esModule?t:{default:t}}(n(15));e.default={components:{},data:function(){var t=this;return{form:{bonusType:"",bonusTypeName:"",batchCode:"",depId:"",deptName:"",curActTitle:"",serialNumber:"",serialList:[]},spinShow:!1,dataId:"",table:{total:0,start:1,limit:20,data:[],loading:!1,checkBoxList:[],tableColumns1:[{type:"selection",width:40,align:"center"},{title:"奖金名称",key:"batchName",minWidth:300},{title:"应发奖金",key:"totalBonus",minWidth:100},{title:"批次总人数",key:"dataNum",minWidth:80},{title:"审批流水号",key:"serialNumber",minWidth:150},{title:"审批标题",key:"novaEntityTitle",minWidth:230,render:function(t,e){return t("a",{attr:{href:"text"},style:{color:"#2d8cf0"},on:{click:function(){window.open("/nova/embedded/index.html?id="+e.row.entityId,"_blank")}}},e.row.novaEntityTitle)}},{title:"当前环节",key:"curActTitle",minWidth:100},{title:"状态",key:"novaStatusName",minWidth:60},{title:"开始时间",key:"sendTime",minWidth:180},{title:"结束时间",key:"overTime",minWidth:180},{title:"提交人",key:"draftName",minWidth:60},{title:"操作",key:"Action",fixed:"right",align:"center",minWidth:100,render:function(e,n){var a=[];return n.row.novaStatus||a.push(e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.$Modal.confirm({title:"提示信息",width:"500px",content:"确定要删除<span style='color:red'>【"+n.row.batchName+"】</span>吗？",onOk:function(){o.default.bonusDelId({id:n.row.id,success:function(e){if(t.$Message.error(e.statusText),0==e.status)return t.getList()}})}})}}},"删除")),e("div",[].concat(a,[e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){window.open("/sylla/phr-ui/bonus/import/fulldownload?dataId="+n.row.dataId,"_blank")}}},"导出")]))}}]}}},computed:{pageSizeOpts:function(){return[20,60,100,this.table.total]}},watch:{"form.depId":function(t){this.form.deptName=this.getName(this.$store.state.batch.deptList,t)},"form.bonusType":function(t){this.form.bonusTypeName=this.getName(this.$store.state.batch.typeitemInfo,t)}},created:function(){this.$store.dispatch("getTypeitemInfo"),this.$store.dispatch("getDeptList"),this.getList(),this.jjspcuracttitleList()},methods:{bonusApproval:function(){var t=this,e=this.table.checkBoxList.join();o.default.bonusApprovalCheck({ids:e,success:function(n){if(0==n.status)return o.default.bonusjjspcreate({ids:e,success:function(e){if(0==e.status)return window.open("/nova/embedded/index.html?id="+e.data,"_blank");t.$Message.error(n.statusText)}});t.$Message.error(n.statusText)}})},selectionChange:function(t){var e=this;this.table.checkBoxList=[],t&&t.map(function(t){e.table.checkBoxList.push(t.dataId)})},formReset:function(){var t=this.form;for(var e in t)"serialList"!==e&&(t[e]="")},jjspcuracttitleList:function(){var t=this;o.default.jjspcuracttitleList({success:function(e){var n=[];e.data.map(function(t){n.push({label:t.key,value:t.value})}),t.form.serialList=[].concat(n)}})},pageSizeOptsChange:function(t){this.table.limit=t||20,this.getList()},changePage:function(t){this.table.start=t,this.getList()},getList:function(){var t=this,e=this.form,n=this.table;n.loading=!0,o.default.jjspinfoGrid(a({},e,n,{success:function(e){n.loading=!1;var o=[];e.data.map(function(t){t.novaStatus&&(t._disabled=!0),o.push(t)}),t.table=a({},t.table,{data:[].concat(o),total:e.totalCount})}}))},clearTable:function(){var t=this.table;return t.data=[],t},onProgress:function(){this.spinShow=!0},getName:function(t,e){var n="";if(e)for(var a=0;a<t.length;a++)if(e===t[a].value){n=t[a].label||t[a].text;break}return n},rowClassName:function(t){var e="";return t.waring?e="ff6600":t.error&&(e="demo-table-error-row"),e},bonustypebatchitemChange:function(t){this.$store.dispatch("getBonustypebatchitem",t)},bonustypebatchitemInfoChange:function(t){for(var e=this.$store.state.batch.typebatchitemInfo,n=0;n<e.length;n++)if(e[n].text===t){var a=e[n],o=a.sugText&&a.sugText.split("-"),r=a.value&&a.value.split("-");this.form.batchCode=a.value,this.form.grantStartMonth=this.valCheck(o[0]),this.form.grantEndMonth=this.valCheck(o[1]),this.form.startMonth=this.valCheck(r[0]),this.form.endMonth=this.valCheck(r[1]);break}},valCheck:function(t){return t&&t.replace(/^(\d{4})(\d{2})$/,"$1-$2")||""}}}}}]);