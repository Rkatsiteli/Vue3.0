(window.webpackJsonpso=window.webpackJsonpso||[]).push([[4],{100:function(t,e,n){var a=n(101);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(6).default)("47b699db",a,!1,{})},101:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,"\n.batchList {\n  cursor: pointer;\n}\n.batchList .formItem {\n  padding: 6px 12px;\n  margin: 0px auto;\n}\n.batchList .required .ivu-form-item-label:before {\n  content: '*';\n  color: red;\n  font-weight: bold;\n}\n.batchList .btns {\n  display: flex;\n  display: -webkit-box;\n}\n.batchList .btns .importLog {\n  margin-left: 16px;\n}\n.batchList .downBtns {\n  padding: 6px 12px;\n  margin: 0;\n}\n.batchList-table {\n  margin-top: 12px;\n}\n.batchList-table th {\n  font-size: 12px;\n}\n.batchList-table td {\n  font-size: 12px;\n}\n.batchList-table .export {\n  position: absolute;\n  right: 0;\n  top: -30px;\n}\n.batchList-table .moneyCount {\n  width: calc(100% - 190px);\n  margin-bottom: 18px;\n  color: #222222;\n  font-size: 12px;\n}\n.batchList-table .moneyCount span {\n  color: red;\n}\n.batchList-table .preprocessing {\n  color: #999999;\n  font-size: 14px;\n  margin-bottom: 12px;\n}\n.batchList .ivu-table .demo-table-error-row td {\n  background-color: rgba(241, 67, 67, 0.5);\n  color: #fff;\n}\n.batchList .ivu-table .demo-table-info-row td {\n  background-color: #2db7f5;\n  color: #fff;\n}\n.batchList .red {\n  color: red;\n  font-size: 14px;\n  font-family: sans-serif;\n}\n.batchList .ff6600 td {\n  background-color: #f5f1c6;\n  color: #333333;\n}\n.batchList .ivu-page-prev i,\n.batchList .ivu-page-next i,\n.batchList .ivu-page-item-jump-next i {\n  position: relative;\n  top: 8px;\n}\n",""])},102:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"batchList"},[n("Card",[n("Form",{attrs:{"label-width":100}},[n("Row",[n("Col",{attrs:{span:"6"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"奖金类型"}},[n("Select",{class:t.form.bonusType?"":"requiredError",attrs:{required:""},on:{"on-change":t.bonustypebatchitemChange},model:{value:t.form.bonusType,callback:function(e){t.$set(t.form,"bonusType",e)},expression:"form.bonusType"}},t._l(t.$store.state.batch.typeitemInfo,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.text))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"奖金归属期间"}},[n("Select",{class:t.form.batchName?"":"requiredError",attrs:{filterable:""},on:{"on-change":t.bonustypebatchitemInfoChange},model:{value:t.form.batchName,callback:function(e){t.$set(t.form,"batchName",e)},expression:"form.batchName"}},t._l(t.$store.state.batch.typebatchitemInfo,function(e){return n("Option",{key:e.value,attrs:{value:e.text}},[t._v(t._s(e.text))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"奖金归属部门"}},[n("Select",{class:t.form.depId?"":"requiredError",attrs:{filterable:""},model:{value:t.form.depId,callback:function(e){t.$set(t.form,"depId",e)},expression:"form.depId"}},t._l(t.$store.state.batch.deptList,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"6"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"当前环节"}},[n("Select",{class:t.form.curActTitle?"":"requiredError",attrs:{filterable:""},model:{value:t.form.curActTitle,callback:function(e){t.$set(t.form,"curActTitle",e)},expression:"form.curActTitle"}},t._l(t.form.serialList,function(e){return n("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}))],1)],1),t._v(" "),n("Col",{attrs:{span:"5"}},[n("FormItem",{staticClass:"formItem",attrs:{label:"审批流水号"}},[n("Input",{model:{value:t.form.serialNumber,callback:function(e){t.$set(t.form,"serialNumber",e)},expression:"form.serialNumber"}})],1)],1),t._v(" "),n("Col",{staticClass:"formItem btns",attrs:{span:"8"}},[n("Button",{staticStyle:{width:"86px"},attrs:{type:"primary"},on:{click:t.getList}},[t._v("查询")]),t._v(" "),n("Button",{staticStyle:{"margin-left":"16px"},on:{click:t.formReset}},[t._v("重置")]),t._v(" "),n("Button",{staticStyle:{"margin-left":"16px"},attrs:{type:"primary",disabled:t.table.checkBoxList.length<1},on:{click:t.bonusApproval}},[t._v("奖金审批")])],1)],1)],1)],1),t._v(" "),n("Card",{staticClass:"batch-table"},[n("Row",[n("Table",{ref:"table",attrs:{"row-class-name":t.rowClassName,columns:t.table.tableColumns1,data:t.table.data,loading:t.table.loading,stripe:"",height:"530"},on:{"on-selection-change":t.selectionChange}}),t._v(" "),n("Page",{staticStyle:{"margin-top":"10px"},attrs:{align:"right",total:t.table.total,current:t.table.start,"page-size":t.table.limit,"page-size-opts":t.pageSizeOpts,"show-sizer":"","show-total":""},on:{"on-page-size-change":t.pageSizeOptsChange,"on-change":t.changePage}})],1)],1),t._v(" "),t.spinShow?n("Spin",{attrs:{size:"large",fix:""}}):t._e()],1)},i=[];a._withStripped=!0},103:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return i});var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("XFrame",{staticClass:"batchMain"},[n("div",{staticClass:"batchMain-centent"},[n("Tabs",{attrs:{animated:!1,value:t.$route.query.type,type:"card"},on:{"on-click":t.change}},[n("TabPane",{attrs:{name:"index",label:"奖金批次导入"}},[t.flag||"index"==t.$route.query.type?n("Index"):t._e()],1),t._v(" "),n("TabPane",{attrs:{name:"list",label:"奖金批次列表"}},[t.flag||"list"==t.$route.query.type?n("List",{ref:"batchMainListRef"}):t._e()],1)],1)],1),t._v(" "),n("Modal",{staticClass:"informationDia",attrs:{"mask-closable":!1,width:"600"},on:{close:function(e){t.modal2=!1}},model:{value:t.modal2,callback:function(e){t.modal2=e},expression:"modal2"}},[n("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[n("span",[t._v("提示信息")])]),t._v(" "),n("section",{staticClass:"informationDia-section"},[n("div",{staticClass:"title"},[t._v("1、奖金审批流程：")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("    导入奖金核对：奖金批次导入页面--点击“导入日志”--核对奖金是否导入成功（相关字段是否准确）；")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("    奖金审批：奖金审批页面—点击“新增”—添加奖金批次—提交前请点击“审批流预览”进行核查—提交审批（审批流程全部结束后奖金即进入工资计算）。")]),t._v(" "),n("div",{staticClass:"title"},[t._v("2、发放月和归属月：")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("  “发放月”为薪资月，正式员工为当月，派遣员工为上月；")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("  “归属月”为奖金所属月，奖金属于哪月或者哪个季度，就填写哪月。")]),t._v(" "),n("div",[t._v("举例说明：")]),t._v(" "),n("div",[t._v("2019年8月20日发放司机奖金，司机为派遣员工，派遣员工是下发薪，8月20日发放的是7月工资，故司机奖金发放月也为7月，8月份司机获得的是7月奖金，则归属月为7月。")]),t._v(" "),n("div",{staticClass:"title"},[t._v("3、月度奖金和月浮动工资：")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("  “月度奖金”是除月固定工资外，额外奖励员工的一笔独立奖金，只有正数，没有负数，录入月度PM奖金项，注意录入名称填为月度奖金；")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("  “月浮动工资”是从月固定工资中分拆出来，每月根据员工的表现选择全额发放或者部分发放，有正数，有负数，不属于奖金，无需录入。")]),t._v(" "),n("div",{staticClass:"title"},[t._v("4、奖金模板选择：")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("    司机奖金、催收奖金--录入其他奖金；")]),t._v(" "),n("div",[n("b",[t._v("*")]),t._v("    月度奖金--录入月度PM奖金。")])]),t._v(" "),n("div",{attrs:{slot:"footer"},slot:"footer"},[n("label",{staticClass:"informationDia-sectionLabel"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.isNoReminder,expression:"isNoReminder"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.isNoReminder)?t._i(t.isNoReminder,null)>-1:t.isNoReminder},on:{change:[function(e){var n=t.isNoReminder,a=e.target,i=!!a.checked;if(Array.isArray(n)){var o=t._i(n,null);a.checked?o<0&&(t.isNoReminder=n.concat([null])):o>-1&&(t.isNoReminder=n.slice(0,o).concat(n.slice(o+1)))}else t.isNoReminder=i},t.isNoReminderChange]}}),t._v("\n        不再提醒\n      ")]),t._v(" "),n("Button",{attrs:{type:"primary"},nativeOn:{click:function(e){t.closeInformationDia()}}},[t._v("确定")])],1)])],1)},i=[];a._withStripped=!0},46:function(t,e,n){"use strict";n.r(e);var a=n(58),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var r=n(103),s=n(0),l=!1;var c=function(t){l||n(90)},u=Object(s.a)(i.a,r.a,r.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\batch\\main.vue",e.default=u.exports},58:function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _index=__webpack_require__(44),_index2=_interopRequireDefault(_index),_list=__webpack_require__(99),_list2=_interopRequireDefault(_list);function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}}exports.default={components:{Index:_index2.default,List:_list2.default},data:function(){var t=window.localStorage.closeInformationDia||!0;return{flag:"index",modal2:t=JSON.parse(t),isNoReminder:!1}},created:function(){},methods:{isNoReminderChange:function(){var t=this.isNoReminder;window.localStorage.closeInformationDia=!t},closeInformationDia:function(){this.isNoReminderChange(),this.modal2=!1},change:function(t){"list"==t&&(this.$refs.batchMainListRef.table.start=1,this.$refs.batchMainListRef.getList()),this.$router.replace({path:"/hr/bonus/batch/main?type="+t})},changeURLArg:function changeURLArg(url,arg,arg_val){var pattern=arg+"=([^&]*)",replaceText=arg+"="+arg_val;if(url.match(pattern)){var tmp="/("+arg+"=)([^&]*)/gi";return tmp=url.replace(eval(tmp),replaceText),tmp}return url.match("[?]")?url+"&"+replaceText:url+"?"+replaceText}}}},61:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},i=function(t){return t&&t.__esModule?t:{default:t}}(n(15));e.default={components:{},data:function(){var t=this;return{form:{bonusType:"",bonusTypeName:"",batchCode:"",depId:"",deptName:"",curActTitle:"",serialNumber:"",serialList:[]},spinShow:!1,dataId:"",table:{total:0,start:1,limit:20,data:[],loading:!1,checkBoxList:[],tableColumns1:[{type:"selection",width:40,align:"center"},{title:"奖金名称",key:"batchName",minWidth:300},{title:"应发奖金",key:"totalBonus",minWidth:100},{title:"批次总人数",key:"dataNum",minWidth:80},{title:"审批流水号",key:"serialNumber",minWidth:150},{title:"审批标题",key:"novaEntityTitle",minWidth:230,render:function(t,e){return t("a",{attr:{href:"text"},style:{color:"#2d8cf0"},on:{click:function(){window.open("/nova/embedded/index.html?id="+e.row.entityId,"_blank")}}},e.row.novaEntityTitle)}},{title:"当前环节",key:"curActTitle",minWidth:100},{title:"状态",key:"novaStatusName",minWidth:60},{title:"开始时间",key:"sendTime",minWidth:180},{title:"结束时间",key:"overTime",minWidth:180},{title:"提交人",key:"draftName",minWidth:60},{title:"操作",key:"Action",fixed:"right",align:"center",minWidth:100,render:function(e,n){var a=[];return n.row.novaStatus||a.push(e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){t.$Modal.confirm({title:"提示信息",width:"500px",content:"确定要删除<span style='color:red'>【"+n.row.batchName+"】</span>吗？",onOk:function(){i.default.bonusDelId({id:n.row.id,success:function(e){if(t.$Message.error(e.statusText),0==e.status)return t.getList()}})}})}}},"删除")),e("div",[].concat(a,[e("Button",{props:{type:"text",size:"small"},style:{color:"#2d8cf0"},on:{click:function(){window.open("/sylla/phr-ui/bonus/import/fulldownload?dataId="+n.row.dataId,"_blank")}}},"导出")]))}}]}}},computed:{pageSizeOpts:function(){return[20,60,100,this.table.total]}},watch:{"form.depId":function(t){this.form.deptName=this.getName(this.$store.state.batch.deptList,t)},"form.bonusType":function(t){this.form.bonusTypeName=this.getName(this.$store.state.batch.typeitemInfo,t)}},created:function(){this.$store.dispatch("getTypeitemInfo"),this.$store.dispatch("getDeptList"),this.getList(),this.jjspcuracttitleList()},methods:{bonusApproval:function(){var t=this,e=this.table.checkBoxList.join();i.default.bonusApprovalCheck({ids:e,success:function(n){if(0==n.status)return i.default.bonusjjspcreate({ids:e,success:function(e){if(0==e.status)return window.open("/nova/embedded/index.html?id="+e.data,"_blank");t.$Message.error(n.statusText)}});t.$Message.error(n.statusText)}})},selectionChange:function(t){var e=this;this.table.checkBoxList=[],t&&t.map(function(t){e.table.checkBoxList.push(t.dataId)})},formReset:function(){var t=this.form;for(var e in t)"serialList"!==e&&(t[e]="")},jjspcuracttitleList:function(){var t=this;i.default.jjspcuracttitleList({success:function(e){var n=[];e.data.map(function(t){n.push({label:t.key,value:t.value})}),t.form.serialList=[].concat(n)}})},pageSizeOptsChange:function(t){this.table.limit=t||20,this.getList()},changePage:function(t){this.table.start=t,this.getList()},getList:function(){var t=this,e=this.form,n=this.table;n.loading=!0,i.default.jjspinfoGrid(a({},e,n,{success:function(e){n.loading=!1;var i=[];e.data.map(function(t){t.novaStatus&&(t._disabled=!0),i.push(t)}),t.table=a({},t.table,{data:[].concat(i),total:e.totalCount})}}))},clearTable:function(){var t=this.table;return t.data=[],t},onProgress:function(){this.spinShow=!0},getName:function(t,e){var n="";if(e)for(var a=0;a<t.length;a++)if(e===t[a].value){n=t[a].label||t[a].text;break}return n},rowClassName:function(t){var e="";return t.waring?e="ff6600":t.error&&(e="demo-table-error-row"),e},bonustypebatchitemChange:function(t){this.$store.dispatch("getBonustypebatchitem",t)},bonustypebatchitemInfoChange:function(t){for(var e=this.$store.state.batch.typebatchitemInfo,n=0;n<e.length;n++)if(e[n].text===t){var a=e[n],i=a.sugText&&a.sugText.split("-"),o=a.value&&a.value.split("-");this.form.batchCode=a.value,this.form.grantStartMonth=this.valCheck(i[0]),this.form.grantEndMonth=this.valCheck(i[1]),this.form.startMonth=this.valCheck(o[0]),this.form.endMonth=this.valCheck(o[1]);break}},valCheck:function(t){return t&&t.replace(/^(\d{4})(\d{2})$/,"$1-$2")||""}}}},90:function(t,e,n){var a=n(91);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,n(6).default)("0ba670de",a,!1,{})},91:function(t,e,n){(t.exports=n(1)(!1)).push([t.i,"\n.batchMain-centent {\n  margin: 5px;\n}\n.informationDia-section div {\n  line-height: 25px;\n  font-size: 12px;\n  color: #333333;\n  margin-left: 16px;\n}\n.informationDia-section div b {\n  color: red;\n  position: relative;\n  top: 2px;\n}\n.informationDia-section .title {\n  font-size: 15px;\n  color: #222222;\n  font-weight: 500;\n  padding: 12px 0px 3px;\n}\n.informationDia-sectionLabel {\n  margin-right: 30px;\n  display: inline-block;\n  position: relative;\n  cursor: pointer;\n}\n.informationDia-sectionLabel input[type='checkbox'] {\n  position: relative;\n  top: 2px;\n}\n",""])},99:function(t,e,n){"use strict";n.r(e);var a=n(61),i=n.n(a);for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);var r=n(102),s=n(0),l=!1;var c=function(t){l||n(100)},u=Object(s.a)(i.a,r.a,r.b,!1,c,null,null);u.options.__file="src\\page\\bonus\\batch\\list.vue",e.default=u.exports}}]);